# 05 Active Context

本文件追蹤目前的工作重點、最近的變更、下一步計畫與重要決策。

## 目前工作重點
- 隨機產生平滑過山車軌道，長度約20秒
- 第一人稱視角沿軌道平滑移動
- 側視圖同步顯示軌道與進度
- 軌道兩側隨機分布物件，增強沉浸感
- 左右兩側物件使用不同貼圖集
  - 左側：`image_L_1.jpg` ~ `image_L_4.jpg`
  - 右側：`image_R_1.jpg` ~ `image_R_4.jpg`
- 兩側物體偏移距離已加倍，更靠外側
- 使用 Vite 開發伺服器即時預覽
- **光影與材質優化**
  - 軌道平面新增，模擬真實軌道
  - 加入環境貼圖，模擬反射
  - 調整光源位置、顏色、強度
  - 所有物件（軌道、車子、兩側物體）改用金屬反射材質

## 最近完成的變更
- 完成 Vite + three.js 環境建置
- 製作上下分割畫面
- 隨機生成平滑軌道
- 第一人稱視角動畫
- 側視圖繪製
- 軌道兩側隨機物件產生
- 左右貼圖命名規則修正，避免載入錯誤
- 兩側物體偏移距離調整
- **新增軌道平面，模擬真實軌道結構**
- **加入純色環境貼圖，提升反射效果**
- **光源位置調整至軌道中央上方，並增強強度與衰減**
- **軌道、車子、兩側物體材質改為金屬反射，受光源與環境影響**

## 下一步計畫
- 將兩側物件替換成更具意義的看板或事件標示
- 增加互動功能（如暫停、重播、速度調整）
- 美術優化（材質、光影、特效）
- 優化效能與相容性
- 撰寫模組化程式碼，方便擴充

## 活躍的技術決策
- 採用純前端 three.js 實現 3D
- 使用 Vite 作為開發伺服器
- 軌道採 CatmullRom 曲線平滑生成
- 物件隨機分布於軌道兩側，增強沉浸感
- 以快速雛型為主，逐步優化

## 需特別注意事項
- 3D 效能優化，避免卡頓
- 兼容主流桌面瀏覽器
- 視覺設計需兼顧資訊傳達
- 開發流程保持簡潔快速迭代
- 後續資料結構設計，方便擴充事件與看板

## 版本紀錄
- v0.1 初始化文件
- v0.2 補充目前工作重點與計畫
- v0.3 調整開發優先順序，加入開發伺服器與雛型目標
- v0.4 更新隨機軌道、側視圖、兩側物件狀態
